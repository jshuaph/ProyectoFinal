package com.tap.gestiontorneo.View;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.*;
import javafx.stage.Stage;
import org.kordamp.bootstrapfx.BootstrapFX;

public class MainView {

    private BorderPane rootLayout;

    // Vistas (solo interfaz)
    private Pane cuentaView;
    private Pane equiposView;
    private Pane tablaView;
    private Pane calendarioView;

    public void start(Stage stage) {

        rootLayout = new BorderPane();

        // Crear las 4 vistas
        cuentaView = buildCuentaView();
        equiposView = buildEquiposView();
        tablaView = buildTablaView();
        calendarioView = buildCalendarioView();

        // Sidebar de navegación
        VBox sideMenu = buildSideMenu();

        // Establecer menú lateral y vista inicial
        rootLayout.setLeft(sideMenu);
        rootLayout.setCenter(cuentaView);

        Scene scene = new Scene(rootLayout, 1000, 600);
        scene.getStylesheets().add(BootstrapFX.bootstrapFXStylesheet());

        stage.setTitle("Gestión de Torneos - Panel Principal");
        stage.setScene(scene);
        stage.show();
    }

    // ============================================================
    // MENÚ LATERAL
    // ============================================================

    private VBox buildSideMenu() {

        Label title = new Label("Menú");
        title.getStyleClass().addAll("h3", "text-primary");

        Button cuentaBtn = new Button("Cuenta");
        Button equiposBtn = new Button("Equipos");
        Button tablaBtn = new Button("Tabla de posiciones");
        Button calendarioBtn = new Button("Calendario");

        cuentaBtn.getStyleClass().addAll("btn", "btn-outline-primary", "btn-lg", "m-1");
        equiposBtn.getStyleClass().addAll("btn", "btn-outline-primary", "btn-lg", "m-1");
        tablaBtn.getStyleClass().addAll("btn", "btn-outline-primary", "btn-lg", "m-1");
        calendarioBtn.getStyleClass().addAll("btn", "btn-outline-primary", "btn-lg", "m-1");

        // Acciones: cambian solo la vista central
        cuentaBtn.setOnAction(e -> rootLayout.setCenter(cuentaView));
        equiposBtn.setOnAction(e -> rootLayout.setCenter(equiposView));
        tablaBtn.setOnAction(e -> rootLayout.setCenter(tablaView));
        calendarioBtn.setOnAction(e -> rootLayout.setCenter(calendarioView));

        VBox menu = new VBox(12, title, cuentaBtn, equiposBtn, tablaBtn, calendarioBtn);
        menu.setPadding(new Insets(20));
        menu.setAlignment(Pos.TOP_CENTER);
        menu.setPrefWidth(220);
        menu.getStyleClass().add("bg-light");

        return menu;
    }

    // ============================================================
    // VISTAS (solo interfaz)
    // ============================================================

    private Pane buildCuentaView() {
        Label label = new Label("Cuenta del usuario");
        label.getStyleClass().addAll("h2", "text-primary");

        Button cerrarSesion = new Button("Cerrar Sesión");
        cerrarSesion.getStyleClass().addAll("btn", "btn-danger", "btn-lg");

        VBox layout = new VBox(20, label, cerrarSesion);
        layout.setAlignment(Pos.CENTER);

        return layout;
    }

    private Pane buildEquiposView() {
        Label label = new Label("Gestión de Equipos");
        label.getStyleClass().addAll("h2", "text-success");

        Label sub = new Label("Aquí el usuario ingresará los equipos y generará los brackets.");
        sub.getStyleClass().addAll("text-muted");

        VBox layout = new VBox(20, label, sub);
        layout.setAlignment(Pos.CENTER);

        return layout;
    }

    private Pane buildTablaView() {
        Label label = new Label("Tabla de Posiciones");
        label.getStyleClass().addAll("h2", "text-info");

        VBox layout = new VBox(20, label);
        layout.setAlignment(Pos.CENTER);

        return layout;
    }

    private Pane buildCalendarioView() {
        Label label = new Label("Calendario de Partidos");
        label.getStyleClass().addAll("h2", "text-warning");

        VBox layout = new VBox(20, label);
        layout.setAlignment(Pos.CENTER);

        return layout;
    }

}
